{% comment %}
    Do not edit this file without the knowledge required to do so.
    You can add the revelant stylesheet and script tags to the top of the file
    If you need help, please contact our support team
{% endcomment %}

{{ 'template-collection.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'mask-blobs.css' | asset_url | stylesheet_tag }}
{{ 'quick-add.css' | asset_url | stylesheet_tag }}
  <script src="{{ 'quick-add.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

<style>
  /* Styles existants */
  main{
    max-width: 1200px;
    margin: auto;
  }
  
  .products {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 20px;
    justify-items: center;
    margin-top: 20px;
    padding: 0 20px;
  }

  .product {
    text-align: center;
    max-width: 200px;
  }

  .product img {
    max-width: 100%;
    height: auto;
    cursor: pointer;
  }

  .product-name {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

  .product-name:hover {
    text-decoration: underline;
  }

  /* Styles pour les boutons Add to Cart */
  .button--secondary {
    width: 0.1px; 
    height: 2px;
    color: #720215;
    border: 2px solid #720215;
    background-color: transparent;
    cursor: pointer;
    text-align: center;
    display: inline-block;
    margin-top: 10px; /* Espace entre le prix et le bouton */
  }

  .icon-cart-empty {
  width: 40px;
  height: 40px;
  
}

.icon-cart-empty:hover {
  background-color: #720215;
    color: white;
  
}
  
  .button--secondary:hover {
    background-color: #720215;
    stroke: white;
  }

  .flex-container {
    display: flex;
  }
  
  .card-product{
    background-color: white;
    box-shadow : 2 border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Ombre port√©e */
    transition: transform 0.3s ease-in-out;
    padding: 20px; 
    margin-right: 100px; 
    margin-left: 100px; 
    margin-top: 50px;
    margin-bottom: 50px;
  }

  product-card:hover {
  transform: translateY(-5px) scale(1.05); /* √âchelle de 105% au survol */
}

  .products .card-wrapper {
    width: 100%;
  }

  .uperia-heading {
    color: {{ section.settings.title_color }};
  }

  .uperia-description {
    color: {{ section.settings.description_color }};
   }
  
  /* Responsive */
  @media (max-width: 1200px) {
    .products {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 768px) {
    .products {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 480px) {
    .products {
      grid-template-columns: 1fr;
    }
  }
</style>

{% assign url = request.path %}
{% assign last_segment = url | split: '/' | last %}
{% assign ids = last_segment | split: ',' %}
{% assign total_products = shop.products_count %}

{% assign ids_to_show = ids %}

{% if ids.size > 6 %}
  {% assign shuffled_ids = ids | shuffle %}
  {% assign ids_to_show = shuffled_ids | slice: 0, 6 %}
{% endif %}

<div style="text-align: center;">
  <h2 class="uperia-heading" style="font-weight: bold;">
    {{ section.settings.title }}
  </h2>
  <p class="uperia-description" style="margin-top: 0; margin-bottom: 20px;">
    {{ section.settings.description | replace:'[products_number]', total_products}}
  </p>
</div>

<div class="products">
  {% for id in ids_to_show %}
    {% assign product = all_products[id] %}
    {% if product %}
      {% render 'card-product',
      card_product: product,
      media_aspect_ratio: 1,
      show_vendor: true,
      show_rating: false,
      show_quick_add: true,
      section_id: section.id
    %}
    {% else %}
      <p>Produit {{ id }} pas trouv√©</p>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
    "name": "Uperia - Product Results",
    "settings": [
            {
                "type": "inline_richtext",
                "id": "title",
                "label": "Title",
                "default": "Je t'ai s√©lectionn√© [number_ids] vins ü§©",
                "info": "Utilisez [number_ids] pour afficher le nombre de produits s√©lectionn√©s"
            },
            {
                "type": "inline_richtext",
                "id": "description",
                "label": "Description",
                "default": "Merci d'avoir r√©pondu √† mes questions, je suis ainsi all√© regarder dans les [products_number] produits de notre catalogue et je t'ai trouv√© ces p√©pites üëá",
                "info": "Utilisez [products_number] pour afficher le nombre total de produits"
            },
            {
                "type": "color",
                "id": "title_color",
                "label": "Title color",
                "default": "#000000"
            },
            {
                "type": "color",
                "id": "description_color",
                "label": "Description color",
                "default": "#000000"
            }
        ]
}
{% endschema %}
